(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["6c3e4715fe72671d8f2d84564a3c5012"],{"/BnC":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=[{username:"testadmin",password:"khan1",bio:"has all permissions and capabilities"},{username:"testchild",password:"khan1",bio:"a spawned child of testcoach"},{username:"testcoach",password:"khan1",bio:"a google-user coach of teststudent and testchild"},{username:"testcreator",password:"khan1",bio:"has creator capabilities"},{username:"testcurator",password:"khan1",bio:"has curator capabilities"},{username:"testmaybestudent",password:"khan1",bio:"a user testcoach requested to coach"},{username:"testmoderator",password:"khan1",bio:"has moderator permissions; coaches testcoach/teststudent"},{username:"testnweasupporter",password:"khan1",bio:"has the permissions of nwea support staff"},{username:"testpublisher",password:"khan1",bio:"has curator and publish capabilities"},{username:"testspanishcurator",password:"khan1",bio:"has curator capabilities for es only"},{username:"teststudent",password:"khan1",bio:"a spawned coachee of testcoach"},{username:"teststudent2",password:"khan1",bio:"a non-spawned coachee testcoach and teststudent"},{username:"testunverified",password:"khan1",bio:'an unverified user with the "resend email" banner notification'},{username:"testunverified2",password:"khan1",bio:'an unverified user with the "change email" banner notification'}];t.default=n},"1+Ti":function(e,t,r){"use strict";r("+2oP");r("3KgV");r("07d7");r("5s+n");Object.defineProperty(t,"__esModule",{value:true});t.loadGoogleAuthApi=t.loginWithGoogle=t.GOOGLE_LOGIN_WITH_JOIN_CLASSROOMS_MUTATION=t.GOOGLE_LOGIN_MUTATION=void 0;r("ls82");var u=r("o1mU");var n=i(r("lTCR"));var a=i(r("whzC"));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r,n,a,i,o){try{var s=e[i](o);var u=s.value}catch(e){r(e);return}if(s.done){t(u)}else{Promise.resolve(u).then(n,a)}}function o(s){return function(){var e=this,o=arguments;return new Promise(function(t,r){var n=s.apply(e,o);function a(e){l(n,t,r,a,i,"next",e)}function i(e){l(n,t,r,a,i,"throw",e)}a(undefined)})}}function s(){var t=f(["\n    mutation loginWithGoogleAndJoinClassroomsMutation(\n        $token: String!\n        $signupCodes: [String]!\n    ) {\n        loginWithGoogle(token: $token) {\n            user {\n                id\n                kaid\n                canAccessDistrictsHomepage\n                isTeacher\n                hasUnresolvedInvitations\n            }\n            isFirstLogin\n            error {\n                code\n            }\n        }\n        joinClassroomsPostlogin(signupCodes: $signupCodes) {\n            errors {\n                code\n                signupCode\n                classroomName\n            }\n            studentLists {\n                id\n                cacheId\n                signupCode\n            }\n        }\n    }\n"]);s=function e(){return t};return t}function c(){var t=f(["\n    mutation loginWithGoogleMutation($token: String!) {\n        loginWithGoogle(token: $token) {\n            user {\n                id\n                kaid\n                canAccessDistrictsHomepage\n                isTeacher\n                hasUnresolvedInvitations\n            }\n            isFirstLogin\n            error {\n                code\n            }\n        }\n    }\n"]);c=function e(){return t};return t}function f(e,t){if(!t){t=e.slice(0)}return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=(0,n.default)(c());t.GOOGLE_LOGIN_MUTATION=d;var p=(0,n.default)(s());t.GOOGLE_LOGIN_WITH_JOIN_CLASSROOMS_MUTATION=p;var v=function(){var r=o(regeneratorRuntime.mark(function e(r){var n,a,i,o,s=arguments;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n=s.length>1&&s[1]!==undefined?s[1]:[];a=n.length?p:d;i=!n.length?{token:r}:{token:r,signupCodes:n};t.next=5;return(0,u.apolloMutate)(a,{variables:i});case 5:o=t.sent;if(!(o.errors&&o.errors.length>0)){t.next=8;break}throw new Error("Failed to login");case 8:if(!o.data.loginWithGoogle.error){t.next=10;break}throw new Error("Failed to login: "+o.data.loginWithGoogle.error.code);case 10:return t.abrupt("return",{user:o.data.loginWithGoogle.user,isFirstLogin:o.data.loginWithGoogle.isFirstLogin,joinClassrooms:o.data.joinClassroomsPostlogin});case 11:case"end":return t.stop()}}},e)}));return function e(t){return r.apply(this,arguments)}}();t.loginWithGoogle=v;var h=function e(){if(window.gapi){return Promise.resolve(window.gapi)}return new Promise(function(e,t){var r=document.createElement("script");r.src=a.default.safeLinkTo("https://apis.google.com/js/api:client.js");r.onload=function(){e(window.gapi)};r.onerror=function(e){t(e)};document.body.appendChild(r)})};var m=function e(){return h().then(function(n){return new Promise(function(r,t){n.load("auth2",{callback:function e(){var t=n.auth2.init({client_id:"124072386181-eogtmmv0qose5ovudl946d83miv1ia89.apps.googleusercontent.com",cookiepolicy:"single_host_origin"});r(t)},onerror:function e(){t(new Error("auth2 api failed to load"))}})})})};t.loadGoogleAuthApi=m},"9x/I":function(e,t,r){"use strict";r("ma9I");r("5DmW");r("NBAS");var c=s(r("wd/R"));var p=r("mR6N");var v=o(r("q1tI"));var f=s(r("ZpD3"));var h=s(r("etw9"));var n=o(r("6OHE"));var d=s(r("Q8Wn"));var a=s(r("wF1t"));var m=s(r("HYhL"));var i=s(r("mkzS"));var g=s(r("Yq32"));var b=s(r("m+8x"));var y=s(r("YmN9"));var w=s(r("Bf4f"));var O=s(r("3sfC"));var S=s(r("bMB9"));function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function E(e,t,r){if(t)l(e.prototype,t);if(r)l(e,r);return e}function k(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return P(e)}function C(e){C=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return C(e)}function P(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function j(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)N(e,t)}function N(e,t){N=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return N(e,t)}function I(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var i18n=r("HEOz");var F=i18n._("Please select a valid birthdate.");var B=function e(t,r){var n=c.default.utc().subtract(13,"years");return c.default.utc(t,"YYYY-MM-DD")>n&&r==="learner"};var D=function(e){j(i,e);function i(){var e;var a;u(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}a=k(this,(e=C(i)).call.apply(e,[this].concat(r)));I(P(a),"state",{birthdate:a.props.birthdate||"",birthdateError:"",birthdateFieldInFocus:false});I(P(a),"updateBirthdateFromDateInput",function(e){a.setState({birthdate:e.target.value,birthdateError:""})});I(P(a),"validateBirthdateFromDateInput",function(e){var t=e.target.value;var r=t&&(0,c.default)(t,"YYYY-MM-DD");if(r&&r.isAfter()){a.setState({birthdateError:F})}});I(P(a),"updateBirthdateFromDatepicker",function(e){if(e){if(e.isAfter()){a.setState({birthdateError:F})}else{var t=e.locale("en").format("YYYY-MM-DD");a.setState({birthdate:t,birthdateError:""})}}});I(P(a),"handleEmailClick",function(e){var t=a.props.role;var r=a.state.birthdate;var n=B(r,t);f.default.markMinorConversions([{id:"signup_email_button_clicked"}]);a.props.onBirthdateChange(r,n);a.props.updateStep("identify")});return a}E(i,[{key:"componentDidUpdate",value:function e(t,r){var n=r.birthdate!==this.state.birthdate;if(n&&!this.state.birthdateError){f.default.markMinorConversions([{id:"signup_birthdate_filled",extra:{isIOS:d.default.isIOS}}])}}},{key:"showSignupButtons",value:function e(){if(this.props.role!=="learner"){return true}return!!(this.state.birthdate&&!this.state.birthdateError)}},{key:"setBirthdateFieldInFocus",value:function e(t){if(t){f.default.markMinorConversions([{id:"signup_birthdate_focused",extra:{isIOS:d.default.isIOS}}])}this.setState({birthdateFieldInFocus:t})}},{key:"maybeRenderSignupButtons",value:function e(){var t=this.props,r=t.continueUrl,n=t.googleContinueUrl,a=t.role,i=t.classCodes,o=t.showFacebookButton,s=t.flag,u=t.flagLoading;var l=this.state.birthdate;var c=B(l,a);var f=!u&&s&&a==="teacher";if(!this.showSignupButtons()){return null}var d=c&&!i;return v.createElement("div",{className:(0,p.css)(M.buttons)},!d&&v.createElement("div",{className:(0,p.css)(O.default.signupButtonWrapper)},v.createElement(y.default,{width:"100%",size:"large",role:a,googleContinueUrl:n,postLoginContinueUrl:r,minorConversions:[{id:"signup_google_button_clicked"}],classCodes:i,birthdate:l})),f&&v.createElement("div",{className:(0,p.css)(O.default.signupButtonWrapper)},v.createElement(S.default,{width:"100%",size:"large",isLogin:false})),!c&&o&&v.createElement("div",{className:(0,p.css)(O.default.signupButtonWrapper)},v.createElement(b.default,{width:"100%",size:"large",role:a,postLoginContinueUrl:r,minorConversions:[{id:"signup_facebook_button_clicked"}],classCodes:i})),!c&&v.createElement(T,null,v.createElement("div",{className:(0,p.css)(O.default.signupButtonWrapper)},v.createElement(g.default,{width:"100%",size:"large",role:a,postLoginContinueUrl:r,minorConversions:[{id:"signup_apple_button_clicked"}],classCodes:i}))),v.createElement("div",{className:(0,p.css)(O.default.signupButtonWrapper)},v.createElement(h.default,{title:c?i18n._("Sign up by choosing a username"):i18n._("Sign up with Email"),testId:"sign-up-with-email-button",width:"100%",size:"large",iconComponent:c?null:w.default,onClick:this.handleEmailClick})))}},{key:"render",value:function e(){var r=this;var t=this.state,n=t.birthdate,a=t.birthdateError;var i=this.props.role;var o=!this.state.birthdateFieldInFocus&&a;var s=(0,c.default)();var u=(0,c.default)().subtract(120,"years");var l=d.default.isIOS?v.createElement("input",{type:"date",min:u.format("YYYY-MM-DD"),max:s.format("YYYY-MM_DD"),className:(0,p.css)(M.dateInput,o&&O.default.errorInput),value:n,onFocus:function e(t){return r.setBirthdateFieldInFocus(true)},onChange:function e(t){r.updateBirthdateFromDateInput(t);r.validateBirthdateFromDateInput(t)},onBlur:function e(t){r.setBirthdateFieldInFocus(false);r.validateBirthdateFromDateInput(t)}}):v.createElement("div",{className:(0,p.css)(a&&O.default.errorInput)},v.createElement(m.default,{appearance:"blue-mountain",defaultValue:this.state.birthdate,onChange:this.updateBirthdateFromDatepicker,onFocus:function e(t){f.default.markMinorConversions([{id:"signup_birthdate_focused",extra:{isIOS:d.default.isIOS}}])},reportNull:false,showTitles:true}));return v.createElement("div",null,v.createElement("div",{className:(0,p.css)(i==="learner"?M.birthdayPickerWrapper:M.invisibleBirthdayPickerWrapper)},v.createElement("div",{className:(0,p.css)(O.default.label)},v.createElement("div",{className:(0,p.css)(M.birthdayPickerPrompt)},i18n._("What is your date of birth?")),l,v.createElement("div",{className:(0,p.css)(O.default.fieldRequirement,a?O.default.fieldError:O.default.hiddenFieldError)},a))),this.maybeRenderSignupButtons())}}]);return i}(v.Component);I(D,"defaultProps",{under13:false,role:"learner",showFacebookButton:true});var L=40;var M=p.StyleSheet.create({birthdayPickerWrapper:{display:"block",marginBottom:8,height:95},invisibleBirthdayPickerWrapper:{height:0,opacity:0,visibility:"hidden",overflow:"hidden"},birthdayPickerPrompt:{marginBottom:4},dateInput:{height:L,fontSize:i.default.BODY_FONT_SIZE,border:"1px solid ".concat(n.default.colors.gray85),borderRadius:n.borderRadius,minWidth:"50%",outline:"none",":focus":{borderColor:n.default.colors.kaGreen}},buttons:{animationName:{from:{opacity:0},to:{opacity:1}},animationDuration:"500ms"},login:{marginTop:24,marginBottom:72,textAlign:"center",fontSize:i.default.BODY_FONT_SIZE,color:n.default.colors.kaGreen},link:{":hover":{textDecoration:"none",color:n.default.colors.kaGreenHover}}});var T=(0,a.default)({name:"sign_in_with_apple"})(function(e){var t=e.children,r=e.flag;return r?t:null});e.exports=(0,a.default)({name:"districts_clever_library_active"})(D)},AxB7:function(e,t,r){"use strict";r("ma9I");r("NBAS");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(r("q1tI"));var a=i(r("etw9"));var o=i(r("i0nR"));var s=r("YmN9");var u=r("1+Ti");var l=r("sPtk");var c=r("Y8R6");function i(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function p(e,t,r){if(t)d(e.prototype,t);if(r)d(e,r);return e}function v(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return m(e)}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function m(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)b(e,t)}function b(e,t){b=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return b(e,t)}function y(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var i18n=r("HEOz");var w=function(e){g(i,e);function i(){var e;var n;f(this,i);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++){r[a]=arguments[a]}n=v(this,(e=h(i)).call.apply(e,[this].concat(r)));y(m(n),"state",{loading:false});y(m(n),"handleClick",function(e){n.setState({loading:true});(0,u.loadGoogleAuthApi)().then(function(e){return e.signIn()}).then(function(e){var t=e.getAuthResponse().id_token;(0,u.loginWithGoogle)(t,n.props.classCodes).then(function(e){var t=(0,s.continueUrlForRole)(n.props.postLoginContinueUrl,n.props.googleContinueUrl,n.props.role);var r=(0,l.calculateNextUrl)({userData:e.user,loginType:"google",continueUrl:t,isFirstLogin:e.isFirstLogin,joinClassrooms:e.joinClassrooms});(0,c.redirect)(r);n.setState({loading:false})})},function(e){n.setState({loading:false})})});return n}p(i,[{key:"render",value:function e(){var t=this.state.loading||!!this.props.disabled;return n.default.createElement(a.default,{title:i18n._("Continue with Google"),iconComponent:o.default,disabled:t,onClick:this.handleClick,width:this.props.width,grow:this.props.grow,shrink:this.props.shrink,size:this.props.size})}}]);return i}(n.default.Component);var O=w;t.default=O},DvtR:function(e,t,r){"use strict";r("pNMO");r("yXV3");r("zKZe");r("5DmW");r("SYor");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=o(r("q1tI"));var a=i(r("WjuW"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function s(){s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return s.apply(this,arguments)}function u(e,t){if(e==null)return{};var r=l(e,t);var n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++){n=i[a];if(t.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;r[n]=e[n]}}return r}function l(e,t){if(e==null)return{};var r={};var n=Object.keys(e);var a,i;for(i=0;i<n.length;i++){a=n[i];if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var i18n=r("HEOz");var c=function e(t){if(t==="first"){return i18n._("First name")}if(t==="last"){return i18n._("Last name")}if(t==="full"){return i18n._("Your name")}return null};var f=function e(t){if(t==="first"){return i18n._("Please tell us your first name.")}if(t==="last"){return i18n._("Please tell us your last name.")}if(t==="full"){return i18n._("Please tell us your full name.")}return null};var d=function e(t){return function(e){return e.trim().length===0?f(t):null}};var p=function e(t){var _=t.nameType,r=u(t,["nameType"]);return n.createElement(a.default,s({emptyMessage:f(t.nameType),label:c(t.nameType),validator:d(t.nameType)},r))};t.default=p},QuFw:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("2B1R");r("+2oP");r("5DmW");r("NBAS");r("UxlC");r("EnZy");r("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var u=P(r("q1tI"));var l=r("mR6N");var n=r("vwLt");var a=C(r("Nw73"));var o=C(r("Pwnf"));var s=C(r("SGU3"));var c=r("83y6");var f=C(r("Q8Wn"));var i=C(r("wF1t"));var d=C(r("Yq32"));var p=C(r("m+8x"));var v=C(r("YmN9"));var h=C(r("AxB7"));var m=C(r("JKja"));var g=C(r("3sfC"));var b=C(r("bMB9"));var y=C(r("IH/d"));var w=C(r("WjuW"));var O=C(r("SW+Y"));var S=C(r("RNI6"));var E=r("WGxL");var k=C(r("/BnC"));function C(e){return e&&e.__esModule?e:{default:e}}function P(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function j(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){U(t,e,r[e])})}return t}function N(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function F(e,t,r){if(t)I(e.prototype,t);if(r)I(e,r);return e}function B(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return L(e)}function D(e){D=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return D(e)}function L(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function M(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)T(e,t)}function T(e,t){T=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return T(e,t)}function U(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var i18n=r("HEOz");var A={identifierMissing:i18n._("An email or username is required to log in. "+"You can also log in with Google or Facebook."),passwordMissing:i18n._("A password is required to log in.")};var W=(0,i.default)({name:"new_google_login"})(function(e){var t=e.flag,r=e.children;return r(t?h.default:v.default)});var R=function(e){M(i,e);function i(){var e;var a;N(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}a=B(this,(e=D(i)).call.apply(e,[this].concat(r)));U(L(a),"state",{credentials:{},serverError:null,isSubmitting:false});U(L(a),"handleSubmit",function(e){if(a.state.isSubmitting){return}e.preventDefault();var t=a.getCredentials();if(t){a.doLogin(t)}});U(L(a),"handleSignupClick",function(e){e.preventDefault();a.props.updateStep("intro")});U(L(a),"handleDevSubmit",function(e){var t=e.split(":");var r=t[0];var n=t.slice(1).join(":");a.doLogin({identifier:r,password:n})});return a}F(i,[{key:"doLogin",value:function e(t){var r=this;var n=this.props.classCodes;var a=this.state.isSubmitting;if(a){return}var i=(0,E.getcontinueUrlFromQueryString)()||this.props.continueUrl||null;(0,E.login)({identifier:t.identifier,password:t.password,fkey:(0,c.getXSRFToken)(),continue:i}).then(function(e){window.top.location.replace((0,S.default)({type:"password",continueUrl:i,classCodes:n}))}).catch(function(e){var t=true;if(e&&e.errors&&e.errors.badlogin){t=false;r.setState({serverError:i18n._("Your login or password is incorrect.")});if(r.usernameInputField){r.usernameInputField.focus()}}if(t){r.setState({serverError:i18n._("Error logging in. Please try again.")})}r.setState({isSubmitting:false})});this.setState({isSubmitting:true})}},{key:"getCredentials",value:function e(){var t=this.state.credentials,r=t.identifier,n=t.password;if(r&&n){return{identifier:r,password:n}}return null}},{key:"renderOAuthButtons",value:function e(){var r=this;var t=this.props,n=t.classCodes,a=t.continueUrl,i=t.flag,o=t.googleContinueUrl,s=t.role;return u.createElement("div",{className:(0,l.css)(x.buttons)},u.createElement("div",{className:(0,l.css)(g.default.signupButtonWrapper)},u.createElement(W,null,function(e){return u.createElement(e,{width:"100%",size:"large",role:s,googleContinueUrl:o,postLoginContinueUrl:a,classCodes:n,minorConversions:[{id:"login_google_button_clicked"}]})})),u.createElement(y.default,null,u.createElement("div",{className:(0,l.css)(g.default.signupButtonWrapper)},u.createElement(b.default,{width:"100%",size:"large",isLogin:true,postLoginContinueUrl:a}))),u.createElement("div",{className:(0,l.css)(g.default.signupButtonWrapper)},u.createElement(p.default,{width:"100%",size:"large",role:s,postLoginContinueUrl:a,classCodes:n,minorConversions:[{id:"login_facebook_button_clicked"}]})),i&&u.createElement("div",{className:(0,l.css)(g.default.signupButtonWrapper)},u.createElement(d.default,{size:"large",width:"100%",role:s,classCodes:n,postLoginContinueUrl:a,minorConversions:[{id:"login_apple_button_clicked"}],onError:function e(t){if(t&&t.error==="popup_blocked_by_browser"){r.setState({serverError:i18n._("Your browser blocked a popup window required for logging in. Please change your browser settings to allow popups from khanacademy.org.")})}else{r.setState({serverError:i18n._("Error logging in. Please try again.")})}}})))}},{key:"maybeRenderDevUsers",value:function e(){if(!f.default.IS_DEV_SERVER){return null}var t=k.default.map(function(e){return u.createElement(n.OptionItem,{key:e.username,label:"".concat(e.username,": ").concat(e.bio),value:"".concat(e.username,":").concat(e.password)})});return u.createElement("div",null,u.createElement(n.SingleSelect,{onChange:this.handleDevSubmit,placeholder:"OR log in as an existing user:"},t))}},{key:"renderLoginButtonText",value:function e(){var t=this.state.isSubmitting;return t?i18n._("Logging you in..."):i18n._("Log in")}},{key:"renderLoginForm",value:function e(){var n=this;var t=this.state.serverError;return u.createElement("div",null,u.createElement("div",{role:"alert",className:(0,l.css)(g.default.fieldRequirement,x.serverError,g.default.fieldError)},t),u.createElement(w.default,{testId:"identifier",label:i18n._("Email or username"),emptyMessage:A.identifierMissing,onSubmit:this.handleSubmit,onValidation:function e(t,r){return n.setState({credentials:j({},n.state.credentials,{identifier:t?r:null})})},innerRef:function e(t){return n.usernameInputField=t}}),u.createElement(O.default,{testId:"password",emptyMessage:A.passwordMissing,label:i18n._("Password"),onSubmit:this.handleSubmit,onValidation:function e(t,r){return n.setState({credentials:j({},n.state.credentials,{password:t?r:null})})}}),u.createElement(s.default,{href:"/forgotpw"},i18n._("Forgot password?")),u.createElement(a.default,{width:"100%",size:"large",color:o.default.blue,onClick:this.handleSubmit,disabled:!this.getCredentials(),testId:"log-in-submit-button"},this.renderLoginButtonText()),u.createElement("div",{className:(0,l.css)(x.signup)},u.createElement(s.default,{href:"/signup",onClick:this.handleSignupClick},i18n._("Create an account"))))}},{key:"render",value:function e(){var t=this.props,r=t.previousStep,n=t.updateStep;return u.createElement(m.default,{showBackButton:!!r,onBackClick:r&&function(){return n(r)}},this.renderOAuthButtons(),this.maybeRenderDevUsers(),this.renderLoginForm())}}]);return i}(u.Component);U(R,"defaultProps",{role:"learner"});var x=l.StyleSheet.create({buttons:{marginBottom:40},serverError:{minHeight:24,lineHeight:"24px"},signup:{marginTop:24,marginBottom:72,textAlign:"center"}});var Y=(0,i.default)({name:"sign_in_with_apple"})(R);t.default=Y},radk:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("5DmW");r("NBAS");r("07d7");r("JfAA");r("UxlC");r("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var u=s(r("q1tI"));var n=r("mR6N");var l=a(r("JKja"));var c=a(r("P6bW"));var i=a(r("DvtR"));var f=a(r("SW+Y"));var d=a(r("zdYe"));var o=a(r("RNI6"));var p=r("WGxL");function a(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function v(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){E(t,e,r[e])})}return t}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function g(e,t,r){if(t)m(e.prototype,t);if(r)m(e,r);return e}function b(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return w(e)}function y(e){y=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return y(e)}function w(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function O(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)S(e,t)}function S(e,t){S=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return S(e,t)}function E(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var i18n=r("HEOz");var k=function e(t){var r=function e(t){return u.createElement("span",{dangerouslySetInnerHTML:{__html:t}})};var n={};for(var a=0,i=["username","email","password"];a<i.length;a++){var o=i[a];var s=o+"_html";if(t[o]){n[o]=t[o].toString()}if(t[s]){n[o]=r(t[s])}}return n};var C=function(e){O(a,e);function a(){var e;var i;h(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}i=b(this,(e=y(a)).call.apply(e,[this].concat(r)));E(w(i),"state",{fields:{},fieldErrors:{},isRedirecting:false,isSubmitting:false,serverError:false});E(w(i),"handleEmailSignupSuccess",function(e){var t=i.props,r=t.onEmailSignupSuccess,n=t.referral,a=t.classCodes;if(r){r()}window.top.location.replace((0,o.default)({type:"password",continueUrl:e,referral:n,classCodes:a}))});E(w(i),"handleBackClick",function(e){i.props.updateStep(i.props.previousStep)});E(w(i),"handleSubmit",function(e){e.preventDefault();i.submitForm()});E(w(i),"handleProceedClick",function(e){e.preventDefault();i.submitForm()});E(w(i),"validationHandler",function(n,a){return function(e,t){var r=e?t:null;i.setState({fields:v({},i.state.fields,n(r)),fieldErrors:v({},i.state.fieldErrors,a?a(r):{})})}});return i}g(a,[{key:"getSubmission",value:function e(){var t=this.state.fields,r=t.email,n=t.firstName,a=t.lastName,i=t.password,o=t.username;var s=this.props,u=s.under13,l=s.classCodes;if(!u&&r&&n&&a&&i){return{under13:u,fields:{email:r,firstName:n,lastName:a,password:i}}}if(u&&o&&i){if(l){return{fields:{username:o,password:i,email:""},under13:u}}if(r){return{fields:{username:o,password:i,email:r},under13:u}}}return null}},{key:"submitForm",value:function e(){var r=this;var t=this.getSubmission();if(t===null){return}var n=this.props,a=n.birthdate,i=n.role,o=n.referral,s=n.classCodes;var u=(0,p.getcontinueUrlFromQueryString)()||this.props.continueUrl||null;var l=s?s.join(","):"";var c={password:t.fields.password,classCodes:l,continue:u,birthdate:a,referral:o};var f=t.under13?(0,p.signupUnder13)(v({},c,{parent_email:t.fields.email,username:t.fields.username})):(0,p.signup)(v({},c,{email:t.fields.email,firstname:t.fields.firstName,lastname:t.fields.lastName,role:i}));f.then(function(e){r.handleEmailSignupSuccess(e.continueUrl);r.setState({isRedirecting:true})}).catch(function(e){if(e&&e.errors){var t=k(e.errors);if(Object.keys(t).length===0){r.setState({serverError:true})}r.setState({fieldErrors:t})}r.setState({isSubmitting:false})});this.setState({isSubmitting:true,serverError:false})}},{key:"renderNameFields",value:function e(){return u.createElement("div",{className:(0,n.css)(P.nameFields)},u.createElement("div",{className:(0,n.css)(P.nameFieldWrapper)},u.createElement(i.default,{testId:"signup-first-name-field",nameType:"first",onValidation:this.validationHandler(function(e){return{firstName:e}}),onSubmit:this.handleSubmit})),u.createElement("div",{className:(0,n.css)(P.nameFieldWrapper)},u.createElement(i.default,{testId:"signup-last-name-field",nameType:"last",onValidation:this.validationHandler(function(e){return{lastName:e}}),onSubmit:this.handleSubmit})))}},{key:"renderServerError",value:function e(){var t=this.state.serverError;return t&&i18n._("Sorry, we saw an unexpected error! Please try again later.")}},{key:"renderProceedButtonLabel",value:function e(){var t=this.state,r=t.isRedirecting,n=t.isSubmitting;if(r){return i18n._("Logging you in...")}if(n){return i18n._("Signing up...")}return i18n._("Sign up")}},{key:"renderEmailFieldLabel",value:function e(){var t=this.props.under13;if(t){return i18n._("Your parent or guardian's email")}return i18n._("Your email")}},{key:"renderEmailFieldNotice",value:function e(){var t=this.props.under13;if(t){return i18n._("Weâ€™re excited to get you started, but we need to notify your parent or guardian about your account.")}return null}},{key:"render",value:function e(){var t=this.props,r=t.under13,n=t.classCodes;var a=this.state,i=a.fieldErrors,o=a.isSubmitting;var s=r&&n;return u.createElement(l.default,{showBackButton:true,onBackClick:this.handleBackClick,showProceedButton:true,proceedLabel:this.renderProceedButtonLabel(),proceedDisabled:!this.getSubmission()||o,onProceedClick:this.handleProceedClick},!s&&u.createElement(c.default,{testId:"signup-email-field",label:this.renderEmailFieldLabel(),notice:this.renderEmailFieldNotice(),error:i.email,onValidation:this.validationHandler(function(e){return{email:e}},function(){return{email:null}}),onSubmit:this.handleSubmit}),r?u.createElement(d.default,{error:i.username,onValidation:this.validationHandler(function(e){return{username:e}},function(){return{username:null}}),onSubmit:this.handleSubmit}):this.renderNameFields(),u.createElement(f.default,{testId:"signup-password-field",isCreating:true,error:i.password,onValidation:this.validationHandler(function(e){return{password:e}},function(){return{password:null}}),onSubmit:this.handleSubmit}),this.renderServerError())}}]);return a}(u.Component);E(C,"defaultProps",{previousStep:"intro"});var P=n.StyleSheet.create({serverError:{marginTop:24,marginBottom:72},nameFields:{display:"flex",alignItems:"top"},nameFieldWrapper:{width:"50%",":first-of-type":{marginRight:4},":last-of-type":{marginLeft:4}}});var j=C;t.default=j},sPtk:function(e,t,r){"use strict";r("pNMO");r("4Brf");r("ma9I");r("yq1k");r("4mDm");r("07d7");r("JTJg");r("3bBZ");Object.defineProperty(t,"__esModule",{value:true});t.calculateNextUrl=t.nextUrlAfterFirstTimeLogin=t.buildRedirectUrlFromJoinedClasses=void 0;var c=r("YyAa");var h=function e(t){switch(t.code){case"UNAUTHORIZED":return t.classroomName?"/coaches?restrictedClassName=".concat(t.classroomName):"";case"UDI_NOT_FOUND":return"/coaches?districtClassCode=".concat(t.signupCode);case"CLASSROOM_NOT_FOUND":return"/coaches?failedCode=".concat(t.signupCode);case"DISTRICT_SYNCED_CLASSROOM":return"/coaches?failedCode=".concat(t.signupCode);case"CANNOT_ADD_COACH":return"/coaches?failedCode=".concat(t.signupCode);default:t.code;return""}};var f=function e(t){if(t.errors){var r=true;var n=false;var a=undefined;try{for(var i=t.errors[Symbol.iterator](),o;!(r=(o=i.next()).done);r=true){var s=o.value;var u=h(s);if(u!==""){return u}}}catch(e){n=true;a=e}finally{try{if(!r&&i.return!=null){i.return()}}finally{if(n){throw a}}}}if(t.studentLists){var l=true;var c=false;var f=undefined;try{for(var d=t.studentLists[Symbol.iterator](),p;!(l=(p=d.next()).done);l=true){var v=p.value;if(v.id){return"/?joinedClassCode="+v.signupCode}}}catch(e){c=true;f=e}finally{try{if(!l&&d.return!=null){d.return()}}finally{if(c){throw f}}}}return"/coaches"};t.buildRedirectUrlFromJoinedClasses=f;function a(e,t){if(!t){return e}return"".concat(e,"?continue=").concat(encodeURIComponent(t))}var d=function e(t,r){var n=r.includes("createchild");if(!n&&t.hasUnresolvedInvitations){return a("/createchild",r)}return a(r)};t.nextUrlAfterFirstTimeLogin=d;var n=function e(t){var r=t.userData,n=t.loginType,a=t.continueUrl,i=t.isFirstLogin,o=t.joinClassrooms;var s="";var u=["apple","google","facebook"].includes(n)&&a==="/createchild";if(o){a=f(o)}var l=(0,c.validateContinueUrl)(a,"/");if(u){l="/"}if(i){if(r.canAccessDistrictsHomepage){l="/districts"}else if(r.isTeacher){l="/coach/welcome"}s=d(r,l)}else{s=l}return s};t.calculateNextUrl=n},zdYe:function(e,t,r){"use strict";r("ma9I");r("zKZe");r("5DmW");r("NBAS");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=s(r("q1tI"));var o=r("WGxL");var a=i(r("WjuW"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function u(){u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return u.apply(this,arguments)}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function f(e,t,r){if(t)c(e.prototype,t);if(r)c(e,r);return e}function d(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return v(e)}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function v(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return m(e,t)}function g(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var i18n=r("HEOz");var b={label:i18n._("Choose a username"),notice:i18n._("Use letters and numbers only. For safety, don't use your real name."),placeholder:i18n._("Please choose a username.")};var y=function(e){h(i,e);function i(){var e;var n;l(this,i);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++){r[a]=arguments[a]}n=d(this,(e=p(i)).call.apply(e,[this].concat(r)));g(v(n),"state",{showValidationWhileFocused:false});g(v(n),"validate",function(e){return(0,o.isUsernameAvailable)(e).then(function(e){var t=e.result,r=e.reason;n.setState({showValidationWhileFocused:r===o.USERNAME_VALIDATION_STRINGS.UNAVAILABLE});return t?null:r})});return n}f(i,[{key:"render",value:function e(){var t=this.state.showValidationWhileFocused;var r=this.props.onValidation;return n.createElement(a.default,u({label:b.label,notice:b.notice},this.props,{emptyMessage:b.placeholder,maxLength:o.USERNAME_MAX_LENGTH,onValidation:r,showValidationWhileFocused:t,validator:this.validate}))}}]);return i}(n.Component);var w=y;t.default=w}}]);
//# sourceMappingURL=../../sourcemaps/en/6c3e4715fe72671d8f2d84564a3c5012.432870c90445cc740433.js.map